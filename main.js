(()=>{"use strict";function t(t,o){!function(t,n){const o=document.querySelectorAll(".nav__todo-lists")[0];o.querySelectorAll(".nav__todo-lists__li"),o.innerHTML="";for(var s=0;s<t.length;s++){const e=document.createElement("li");e.setAttribute("class","nav__todo-lists__li"),e.setAttribute("data-todo-list",`${s}`),e.textContent=`${t[s].name}`,t[s]==t[n]&&(e.style.fontWeight="bold"),o.appendChild(e)}e("Add new","nav__add-new",o)}(t,o),n(t,o),function(t){document.querySelectorAll(".main__delete")[0],0==t?(document.querySelectorAll(".main__delete")[0].classList.add("display-none"),document.querySelectorAll(".main__delete")[0].setAttribute("data-todo-list",`${t}`)):(document.querySelectorAll(".main__delete")[0].classList.remove("display-none"),document.querySelectorAll(".main__delete")[0].setAttribute("data-todo-list",`${t}`))}(o)}function e(t,n,o){const s=document.createElement("button");return s.setAttribute("class",n),s.textContent=`${t}`,o.appendChild(s),e}function n(t,e){o(".main__table__row"),o(".main__table__title__finished"),function(t,e){document.querySelectorAll(".main__top__title")[0].textContent=`${t[e].name}`}(t,e);for(var n=0;n<t[e].todos.length;n++)if(0==t[e].todos[n].finished){const o=document.querySelectorAll(".main__table")[0];o.setAttribute("data-todo-list",`${e}`);const s=document.createElement("li");s.classList.add("main__table__row");const a=document.createElement("div");a.classList.add("main__table__column-0");const i=document.createElement("img");i.setAttribute("src","img/checkbox-blank.svg"),i.classList.add("main__checkbox"),i.setAttribute("data-todo",`${n}`);const d=document.createElement("div");d.textContent=`${t[e].todos[n].title}`,d.classList.add("main__table__column-1"),d.setAttribute("data-todo",`${n}`);const l=document.createElement("div");l.textContent=`${t[e].todos[n].dueDate}`,l.classList.add("main__table__column-2"),l.setAttribute("data-todo",`${n}`);const c=document.createElement("div");c.textContent=`${t[e].todos[n].priority}`,c.setAttribute("class","main__table__column-3"),c.setAttribute("data-todo",`${n}`),o.appendChild(s),s.appendChild(a),a.appendChild(i),s.appendChild(d),s.appendChild(l),s.appendChild(c)}if(t[e].todos.some((t=>1==t.finished))){const t=document.querySelectorAll(".main__table")[0],e=document.createElement("p");e.classList.add("main__table__title__finished"),e.textContent="Finished:",t.appendChild(e)}for(n=0;n<t[e].todos.length;n++)if(1==t[e].todos[n].finished){const o=document.querySelectorAll(".main__table")[0];o.setAttribute("data-todo-list",`${e}`);const s=document.createElement("li");s.setAttribute("class","main__table__row"),s.classList.add("main__table__row--finished");const a=document.createElement("div");a.setAttribute("class","main__table__column-0");const i=document.createElement("img");i.setAttribute("src","img/checkbox.svg"),i.setAttribute("class","main__checkbox"),i.setAttribute("data-todo",`${n}`);const d=document.createElement("div");d.textContent=`${t[e].todos[n].title}`,d.classList.add("main__table__column-1","pointer"),d.setAttribute("data-todo",`${n}`);const l=document.createElement("div");l.textContent=`${t[e].todos[n].dueDate}`,l.setAttribute("class","main__table__column-2"),l.setAttribute("data-todo",`${n}`);const c=document.createElement("div");c.textContent=`${t[e].todos[n].priority}`,c.setAttribute("class","main__table__column-3"),c.setAttribute("data-todo",`${n}`),o.appendChild(s),s.appendChild(a),a.appendChild(i),s.appendChild(d),s.appendChild(l),s.appendChild(c)}document.getElementById("table")}function o(t){document.querySelectorAll(t).forEach((t=>{t.remove()}))}function s(){document.getElementsByClassName("modal")[0].classList.add("display-none")}function a(){document.getElementsByClassName("modal--new")[0].classList.add("display-none")}class i{constructor(t){this.name=t,this.todos=[],d.push(this)}}const d=[];d[0]=new i("Default JS"),d[1]=new i("JS list 2");class l{constructor(t,e,n,o,s,a){this.title=t,this.description=e,this.dueDate=n,this.priority=o,this.notes=s,this.finished=!1,d[a].todos.push(this)}}new l("Title 1","Description","Due date","Priority","Notes",0),new l("Title 2","Description 2","Due date 2","Priority 2","Notes 2",0),new l("Title 3","Description 3","Due date 3","Priority 3","Notes 3",1),window.onload=function(){t(d,0)},document.getElementsByClassName("nav__todo-lists")[0].addEventListener("click",(e=>{if("LI"==e.target.nodeName){const n=e.target.getAttribute("data-todo-list");t(d,n)}})),document.getElementsByClassName("main__delete")[0].addEventListener("click",(e=>{const n=e.target.getAttribute("data-todo-list");confirm(`Are you sure you want to delete ${d[n].name}`)&&(d.splice(n),t(d,0))})),document.getElementsByClassName("main__table")[0].addEventListener("click",(function(t){if("main__checkbox"==t.target.classList.value){const e=document.getElementsByClassName("main__table")[0].getAttribute("data-todo-list"),o=t.target.attributes["data-todo"].value;!function(t,e,o){document.getElementsByClassName("main__checkbox")[o],document.getElementsByClassName("main__table__row")[o],0==t[e].todos[o].finished?t[e].todos[o].finished=!0:1==t[e].todos[o].finished&&(t[e].todos[o].finished=!1),n(t,e)}(d,e,o)}})),document.getElementsByClassName("main__table")[0].addEventListener("click",(function(t){if("main__table__column-1"==t.target.classList.value){const e=document.getElementsByClassName("main__table")[0].getAttribute("data-todo-list"),n=t.target.attributes["data-todo"].value;!function(t,e,n){document.getElementsByClassName("modal")[0].classList.remove("display-none"),function(t,e,n){let o=document.getElementsByClassName("modal__window__title")[0],s=document.getElementsByClassName("modal__window__description")[0],a=document.getElementsByClassName("modal__window__due-date")[0],i=document.getElementsByClassName("modal__window__priority")[0],d=document.getElementsByClassName("modal__window__notes")[0];o.textContent=`${t[e].todos[n].title}`,s.textContent=`${t[e].todos[n].description}`,a.textContent=`${t[e].todos[n].dueDate}`,i.textContent=`${t[e].todos[n].priority}`,d.textContent=`${t[e].todos[n].notes}`}(t,e,n)}(d,e,n)}})),document.getElementsByClassName("modal__window__close")[0].addEventListener("click",(function(t){s()})),document.getElementsByClassName("modal")[0].addEventListener("click",(function(t){s()})),document.getElementsByClassName("modal__window")[0].addEventListener("click",(t=>t.stopPropagation())),document.getElementsByClassName("main__new-task")[0].addEventListener("click",(function(t){document.getElementsByClassName("main__table")[0].getAttribute("data-todo-list"),document.getElementsByClassName("modal--new")[0].classList.remove("display-none")})),document.getElementsByClassName("modal--new__window__close")[0].addEventListener("click",(function(t){a()})),document.getElementsByClassName("modal--new")[0].addEventListener("click",(function(t){a()})),document.getElementsByClassName("modal--new__window")[0].addEventListener("click",(t=>t.stopPropagation())),document.getElementsByClassName("nav__todo-lists")[0].addEventListener("click",(function(e){if("nav__add-new"==e.target.classList.value){d[d.length]=new i(prompt("Name for Todo list?"));const e=d.length-1;t(d,e)}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzdCLENBQ0osRyIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9kb20uanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlZnJlc2ggYWxsIGJhc2VkIG9uIHRvZG8gbGlzdHMgYW5kIHRvZG9zXG5mdW5jdGlvbiByZWZyZXNoQWxsKHRvZG9MaXN0QXJyYXksIHRvZG9MaXN0Tm8pIHtcbiAgICByZWZyZXNoTmF2KHRvZG9MaXN0QXJyYXksIHRvZG9MaXN0Tm8pXG4gICAgcmVmcmVzaE1haW4odG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObyk7XG4gICAgbW9kaWZ5RGVsZXRlQnRuKHRvZG9MaXN0Tm8pO1xufTtcblxuLy8gcmVmcmVzaCBuYXZcbmZ1bmN0aW9uIHJlZnJlc2hOYXYodG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObykge1xuICAgIGNvbnN0IHBhcmVudEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX3RvZG8tbGlzdHNcIilbMF07XG4gICAgY29uc3QgY2hpbGRFbCA9IHBhcmVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2X190b2RvLWxpc3RzX19saVwiKVxuXG4gICAgcGFyZW50RWwuaW5uZXJIVE1MID0gXCJcIjtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9kb0xpc3RBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGlsZEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgICAgICBjaGlsZEVsLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibmF2X190b2RvLWxpc3RzX19saVwiKTtcbiAgICAgICAgY2hpbGRFbC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRvZG8tbGlzdFwiLGAke2l9YCk7XG4gICAgICAgIGNoaWxkRWwudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W2ldLm5hbWV9YDtcblxuICAgICAgICBpZiAodG9kb0xpc3RBcnJheVtpXSA9PSB0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dKSB7XG4gICAgICAgICAgICBjaGlsZEVsLnN0eWxlLmZvbnRXZWlnaHQgPSBcImJvbGRcIjtcbiAgICAgICAgfTtcblxuICAgICAgICBwYXJlbnRFbC5hcHBlbmRDaGlsZChjaGlsZEVsKTtcbiAgICB9O1xuICAgIFxuICAgIGNyZWF0ZUJ0bihcIkFkZCBuZXdcIiwgXCJuYXZfX2FkZC1uZXdcIiwgcGFyZW50RWwpXG59O1xuXG4vLyBjcmVhdGUgYnV0dG9uIFxuZnVuY3Rpb24gY3JlYXRlQnRuKHRleHQsIGNsYXNzTmFtZSwgcGFyZW50KSB7XG4gICAgY29uc3QgYnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBidG4uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgY2xhc3NOYW1lKTtcblxuICAgIGJ0bi50ZXh0Q29udGVudCA9IGAke3RleHR9YDtcbiAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoYnRuKTtcblxuICAgIHJldHVybiBjcmVhdGVCdG47XG59O1xuXG4vLyBjcmVhdGUgdG9kbyB0YWJsZVxuZnVuY3Rpb24gcmVmcmVzaE1haW4odG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObykge1xuICAgIHJlbW92ZUVsZW1lbnRzKFwiLm1haW5fX3RhYmxlX19yb3dcIik7IFxuICAgIHJlbW92ZUVsZW1lbnRzKFwiLm1haW5fX3RhYmxlX190aXRsZV9fZmluaXNoZWRcIilcbiAgICBhZGRNYWluVGl0bGUodG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObylcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBpZiB0b2RvIGlzIG5vdCBmaW5pc2hlZFxuICAgICAgICBpZiAodG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvc1tpXS5maW5pc2hlZCA9PSBmYWxzZSkgeyBcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tYWluX190YWJsZVwiKVswXTsgXG4gICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoYGRhdGEtdG9kby1saXN0YCxgJHt0b2RvTGlzdE5vfWApO1xuXG4gICAgICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoXCJtYWluX190YWJsZV9fcm93XCIpO1xuXG4gICAgICAgICAgICBjb25zdCBkaXYwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRpdjAuY2xhc3NMaXN0LmFkZChcIm1haW5fX3RhYmxlX19jb2x1bW4tMFwiKTtcblxuICAgICAgICAgICAgY29uc3QgY2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgICAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiaW1nL2NoZWNrYm94LWJsYW5rLnN2Z1wiKTtcbiAgICAgICAgICAgIGNoZWNrYm94LmNsYXNzTGlzdC5hZGQoXCJtYWluX19jaGVja2JveFwiKTtcbiAgICAgICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZShgZGF0YS10b2RvYCxgJHtpfWApO1xuXG4gICAgICAgICAgICBjb25zdCBkaXYxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRpdjEudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLnRvZG9zW2ldLnRpdGxlfWA7XG4gICAgICAgICAgICBkaXYxLmNsYXNzTGlzdC5hZGQoXCJtYWluX190YWJsZV9fY29sdW1uLTFcIik7XG5cbiAgICAgICAgICAgIGRpdjEuc2V0QXR0cmlidXRlKGBkYXRhLXRvZG9gLGAke2l9YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGRpdjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgZGl2Mi50ZXh0Q29udGVudCA9IGAke3RvZG9MaXN0QXJyYXlbdG9kb0xpc3ROb10udG9kb3NbaV0uZHVlRGF0ZX1gO1xuICAgICAgICAgICAgZGl2Mi5jbGFzc0xpc3QuYWRkKFwibWFpbl9fdGFibGVfX2NvbHVtbi0yXCIpO1xuXG4gICAgICAgICAgICBkaXYyLnNldEF0dHJpYnV0ZShgZGF0YS10b2RvYCxgJHtpfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkaXYzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRpdjMudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLnRvZG9zW2ldLnByaW9yaXR5fWA7XG4gICAgICAgICAgICBkaXYzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbl9fdGFibGVfX2NvbHVtbi0zXCIpO1xuICAgICAgICAgICAgZGl2My5zZXRBdHRyaWJ1dGUoYGRhdGEtdG9kb2AsYCR7aX1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQobGkpO1xuICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGl2MCk7XG4gICAgICAgICAgICBkaXYwLmFwcGVuZENoaWxkKGNoZWNrYm94KTtcbiAgICAgICAgICAgIGxpLmFwcGVuZENoaWxkKGRpdjEpO1xuICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGl2Mik7XG4gICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChkaXYzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIC8vIGlmIG9uZSBvciBtb3JlIHRvZG9zIGFyZSBmaW5pc2hlZFxuICAgICAgICBpZiAodG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvcy5zb21lKGUgPT4gZS5maW5pc2hlZCA9PSB0cnVlKSkge1xuICAgICAgICAgICAgY29uc3QgdGFibGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1haW5fX3RhYmxlXCIpWzBdOyBcblxuICAgICAgICAgICAgY29uc3QgZmluaXNoZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICAgICAgICAgIGZpbmlzaGVkLmNsYXNzTGlzdC5hZGQoXCJtYWluX190YWJsZV9fdGl0bGVfX2ZpbmlzaGVkXCIpO1xuICAgICAgICAgICAgZmluaXNoZWQudGV4dENvbnRlbnQgPSBcIkZpbmlzaGVkOlwiO1xuXG4gICAgICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChmaW5pc2hlZCk7XG4gICAgICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvZG9MaXN0QXJyYXlbdG9kb0xpc3ROb10udG9kb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAvLyBpZiB0b2RvIGlzIG5vdCBmaW5pc2hlZFxuICAgICAgICBpZiAodG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvc1tpXS5maW5pc2hlZCA9PSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWFpbl9fdGFibGVcIilbMF07XG4gICAgICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoYGRhdGEtdG9kby1saXN0YCxgJHt0b2RvTGlzdE5vfWApO1xuXG4gICAgICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcbiAgICAgICAgICAgIGxpLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbl9fdGFibGVfX3Jvd1wiKTtcbiAgICAgICAgICAgIGxpLmNsYXNzTGlzdC5hZGQoXCJtYWluX190YWJsZV9fcm93LS1maW5pc2hlZFwiKTtcblxuICAgICAgICAgICAgY29uc3QgZGl2MCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBkaXYwLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbl9fdGFibGVfX2NvbHVtbi0wXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgICBjaGVja2JveC5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCJpbWcvY2hlY2tib3guc3ZnXCIpO1xuICAgICAgICAgICAgY2hlY2tib3guc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtYWluX19jaGVja2JveFwiKTtcbiAgICAgICAgICAgIGNoZWNrYm94LnNldEF0dHJpYnV0ZShgZGF0YS10b2RvYCxgJHtpfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkaXYxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRpdjEudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLnRvZG9zW2ldLnRpdGxlfWA7XG4gICAgICAgICAgICBkaXYxLmNsYXNzTGlzdC5hZGQoXCJtYWluX190YWJsZV9fY29sdW1uLTFcIiwgXCJwb2ludGVyXCIpO1xuXG4gICAgICAgICAgICBkaXYxLnNldEF0dHJpYnV0ZShgZGF0YS10b2RvYCxgJHtpfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkaXYyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRpdjIudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLnRvZG9zW2ldLmR1ZURhdGV9YDtcbiAgICAgICAgICAgIGRpdjIuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJtYWluX190YWJsZV9fY29sdW1uLTJcIik7XG4gICAgICAgICAgICBkaXYyLnNldEF0dHJpYnV0ZShgZGF0YS10b2RvYCxgJHtpfWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBkaXYzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGRpdjMudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLnRvZG9zW2ldLnByaW9yaXR5fWA7XG4gICAgICAgICAgICBkaXYzLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwibWFpbl9fdGFibGVfX2NvbHVtbi0zXCIpO1xuICAgICAgICAgICAgZGl2My5zZXRBdHRyaWJ1dGUoYGRhdGEtdG9kb2AsYCR7aX1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQobGkpOyBcbiAgICAgICAgICAgIGxpLmFwcGVuZENoaWxkKGRpdjApO1xuICAgICAgICAgICAgZGl2MC5hcHBlbmRDaGlsZChjaGVja2JveCk7XG4gICAgICAgICAgICBsaS5hcHBlbmRDaGlsZChkaXYxKTtcbiAgICAgICAgICAgIGxpLmFwcGVuZENoaWxkKGRpdjIpO1xuICAgICAgICAgICAgbGkuYXBwZW5kQ2hpbGQoZGl2Myk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YWJsZVwiKTtcbn07XG5cbi8vIHJlbW92ZSBlbGVtZW50c1xuZnVuY3Rpb24gcmVtb3ZlRWxlbWVudHMoZWwpIHtcbiAgICBjb25zdCB0b2RvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWwpO1xuXG4gICAgdG9kb3MuZm9yRWFjaChlbCA9PiB7XG4gICAgZWwucmVtb3ZlKCk7XG4gICAgfSk7XG59O1xuXG4vLyByZWZyZXNoIG1haW4gdGl0bGVcbmZ1bmN0aW9uIGFkZE1haW5UaXRsZSh0b2RvTGlzdEFycmF5LCB0b2RvTGlzdE5vKSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1haW5fX3RvcF9fdGl0bGVcIilbMF07XG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLm5hbWV9YDtcbn07XG5cbi8vIG1vZGlmeSBkZWxldGUgYnV0dG9uIChzaG93L2hpZGUsIGFkZCBkYXRhIHZhbHVlKVxuZnVuY3Rpb24gbW9kaWZ5RGVsZXRlQnRuKHRvZG9MaXN0Tm8pIHtcbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1haW5fX2RlbGV0ZVwiKVswXTtcbiAgICBcbiAgICBpZiAodG9kb0xpc3RObyA9PSAwKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWFpbl9fZGVsZXRlXCIpWzBdLmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5LW5vbmVcIik7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWFpbl9fZGVsZXRlXCIpWzBdLnNldEF0dHJpYnV0ZShcImRhdGEtdG9kby1saXN0XCIsYCR7dG9kb0xpc3ROb31gKTtcbiAgICB9XG5cbiAgICBlbHNlIHtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tYWluX19kZWxldGVcIilbMF0uY2xhc3NMaXN0LnJlbW92ZShcImRpc3BsYXktbm9uZVwiKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tYWluX19kZWxldGVcIilbMF0uc2V0QXR0cmlidXRlKFwiZGF0YS10b2RvLWxpc3RcIixgJHt0b2RvTGlzdE5vfWApO1xuICAgIH07XG59O1xuXG4vLyB0b2dnbGUgdG9kbyBmaW5pc2hlZC91bmZpbmlzaGVkXG5mdW5jdGlvbiB0b2dnbGVGaW5pc2hlZCh0b2RvTGlzdEFycmF5LCB0b2RvTGlzdE5vLCB0b2RvTm8pIHtcbiAgICBjb25zdCBjaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluX19jaGVja2JveFwiKVt0b2RvTm9dO1xuICAgIGNvbnN0IG1haW5UYWJsZVJvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluX190YWJsZV9fcm93XCIpW3RvZG9Ob107XG5cbiAgICBpZiAodG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvc1t0b2RvTm9dLmZpbmlzaGVkID09IGZhbHNlKSB7XG4gICAgICAgIHRvZG9MaXN0QXJyYXlbdG9kb0xpc3ROb10udG9kb3NbdG9kb05vXS5maW5pc2hlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgZWxzZSBpZiAodG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvc1t0b2RvTm9dLmZpbmlzaGVkID09IHRydWUpIHtcbiAgICAgICAgdG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvc1t0b2RvTm9dLmZpbmlzaGVkID0gZmFsc2U7XG4gICAgfTtcblxuICAgIHJlZnJlc2hNYWluKHRvZG9MaXN0QXJyYXksIHRvZG9MaXN0Tm8pO1xufTtcblxuLy8gb3BlbiB0b2RvIGRldGFpbHMgd2luZG93XG5mdW5jdGlvbiBvcGVuRGV0YWlscyh0b2RvTGlzdEFycmF5LCB0b2RvTGlzdE5vLCB0b2RvTm8pIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbFwiKVswXTtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiZGlzcGxheS1ub25lXCIpO1xuXG4gICAgcmVmcmVzaERldGFpbHModG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObywgdG9kb05vKTtcbn07XG5cbi8vIGFkZHMgaW5mbyBmcm9tIHRvZG8gb2JqZWN0IHRvIGRldGFpbHMgd2luZG93XG5mdW5jdGlvbiByZWZyZXNoRGV0YWlscyh0b2RvTGlzdEFycmF5LCB0b2RvTGlzdE5vLCB0b2RvTm8pIHtcbiAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWxfX3dpbmRvd19fdGl0bGVcIilbMF07XG4gICAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsX193aW5kb3dfX2Rlc2NyaXB0aW9uXCIpWzBdO1xuICAgIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1vZGFsX193aW5kb3dfX2R1ZS1kYXRlXCIpWzBdO1xuICAgIGxldCBwcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbF9fd2luZG93X19wcmlvcml0eVwiKVswXTtcbiAgICBsZXQgbm90ZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibW9kYWxfX3dpbmRvd19fbm90ZXNcIilbMF07XG5cbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IGAke3RvZG9MaXN0QXJyYXlbdG9kb0xpc3ROb10udG9kb3NbdG9kb05vXS50aXRsZX1gO1xuICAgIGRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gYCR7dG9kb0xpc3RBcnJheVt0b2RvTGlzdE5vXS50b2Rvc1t0b2RvTm9dLmRlc2NyaXB0aW9ufWA7XG4gICAgZHVlRGF0ZS50ZXh0Q29udGVudCA9IGAke3RvZG9MaXN0QXJyYXlbdG9kb0xpc3ROb10udG9kb3NbdG9kb05vXS5kdWVEYXRlfWA7XG4gICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSBgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLnRvZG9zW3RvZG9Ob10ucHJpb3JpdHl9YDtcbiAgICBub3Rlcy50ZXh0Q29udGVudCA9IGAke3RvZG9MaXN0QXJyYXlbdG9kb0xpc3ROb10udG9kb3NbdG9kb05vXS5ub3Rlc31gO1xufTtcblxuLy9jbG9zZXMgZGV0YWlscyB3aW5kb3dcbmZ1bmN0aW9uIGNsb3NlRGV0YWlscygpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbFwiKVswXTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiZGlzcGxheS1ub25lXCIpO1xufTtcblxuLy9vcGVucyBhZGQgbmV3IHdpbmRvd1xuZnVuY3Rpb24gb3BlbkFkZE5ldygpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC0tbmV3XCIpWzBdO1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNwbGF5LW5vbmVcIik7XG59XG5cbi8vY2xvc2VzIGFkZCBuZXcgd2luZG93XG5mdW5jdGlvbiBjbG9zZUFkZE5ldygpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC0tbmV3XCIpWzBdO1xuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJkaXNwbGF5LW5vbmVcIik7XG59XG5cbmV4cG9ydCB7XG4gICAgcmVmcmVzaEFsbCxcbiAgICB0b2dnbGVGaW5pc2hlZCxcbiAgICBvcGVuRGV0YWlscyxcbiAgICBjbG9zZURldGFpbHMsXG4gICAgb3BlbkFkZE5ldyxcbiAgICBjbG9zZUFkZE5ld1xufTsiLCJpbXBvcnQgeyByZWZyZXNoQWxsLCB0b2dnbGVGaW5pc2hlZCwgb3BlbkRldGFpbHMsIGNsb3NlRGV0YWlscywgb3BlbkFkZE5ldywgY2xvc2VBZGROZXcgfSBmcm9tIFwiLi9kb21cIjtcblxuLy8gY2xhc3MgZm9yIHRvZG8tbGlzdHNcbmNsYXNzIFRvZG9MaXN0IHtcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XG4gICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgdGhpcy50b2RvcyA9IFtdO1xuICAgICAgdG9kb0xpc3RBcnJheS5wdXNoKHRoaXMpOyAvLyBwdXNoIGFsbCB0aGUgaW5zdGFuY2VzIGludG8gc2FtZSBhcnJheVxuICAgIH07XG4gIH07XG5cbi8vIGNyZWF0ZSBhcnJheSBmb3IgdG9kby1saXN0IG9iamVjdHNcbmNvbnN0IHRvZG9MaXN0QXJyYXkgPSBbXTtcblxuLy8gY3JlYXRlIHRvZG8gbGlzdHNcbnRvZG9MaXN0QXJyYXlbMF0gPSBuZXcgVG9kb0xpc3QoXCJEZWZhdWx0IEpTXCIpO1xudG9kb0xpc3RBcnJheVsxXSA9IG5ldyBUb2RvTGlzdChcIkpTIGxpc3QgMlwiKTtcblxuXG4vLyBjbGFzcyBmb3IgdG9kbydzXG5jbGFzcyBUb2RvIHtcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBub3RlcywgdG9kb0xpc3RObykge1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICAgICAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgICAgICAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xuICAgICAgICB0aGlzLm5vdGVzID0gbm90ZXNcbiAgICAgICAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuICAgICAgICB0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLnRvZG9zLnB1c2godGhpcyk7XG4gICAgfTtcbn07XG5cbi8vIGNyZWF0ZSBzb21lIHRvZG8gb2JqZWN0c1xuY29uc3QgdG9kbzEgID0gbmV3IFRvZG8oXCJUaXRsZSAxXCIsIFwiRGVzY3JpcHRpb25cIiwgXCJEdWUgZGF0ZVwiLCBcIlByaW9yaXR5XCIsIFwiTm90ZXNcIiwgMCk7XG5jb25zdCB0b2RvMiAgPSBuZXcgVG9kbyhcIlRpdGxlIDJcIiwgXCJEZXNjcmlwdGlvbiAyXCIsIFwiRHVlIGRhdGUgMlwiLCBcIlByaW9yaXR5IDJcIiwgXCJOb3RlcyAyXCIsIDApO1xuY29uc3QgdG9kbzMgID0gbmV3IFRvZG8oXCJUaXRsZSAzXCIsIFwiRGVzY3JpcHRpb24gM1wiLCBcIkR1ZSBkYXRlIDNcIiwgXCJQcmlvcml0eSAzXCIsIFwiTm90ZXMgM1wiLCAxKTtcblxuLy8gZXhlY3V0ZSB3aGVuIGJyb3dzZXIgbG9hZHNcbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICByZWZyZXNoQWxsKHRvZG9MaXN0QXJyYXksIDApO1xufTtcblxuLy8gZXhlY3V0ZSB3aGVuIHRvZG8gbGlzdCBpdGVtIGhhcyBiZWVuIGNsaWNrZWRcbmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJuYXZfX3RvZG8tbGlzdHNcIilbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQubm9kZU5hbWUgPT0gXCJMSVwiKSB7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0Tm8gPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2RvLWxpc3RcIik7XG4gICAgICAgIHJlZnJlc2hBbGwodG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObyk7XG4gICAgfVxuXG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xufSk7XG5cbi8vIGV4ZWN1dGUgd2hlbiBkZWxldGUgYnV0dG9uIGhhcyBiZWVuIGNsaWNrZWRcbmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluX19kZWxldGVcIilbMF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHRvZG9MaXN0Tm8gPSBldmVudC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS10b2RvLWxpc3RcIik7XG4gICAgaWYgKGNvbmZpcm0oYEFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgJHt0b2RvTGlzdEFycmF5W3RvZG9MaXN0Tm9dLm5hbWV9YCkpIHtcbiAgICAgICAgdG9kb0xpc3RBcnJheS5zcGxpY2UodG9kb0xpc3RObyk7XG4gICAgICAgIHJlZnJlc2hBbGwodG9kb0xpc3RBcnJheSwgMCk7XG4gICAgICAgIH07XG59KTtcblxuLy8gZXhlY3V0ZSB3aGVuIGNoZWNrYm94IGhhcyBiZWVuIGNsaWNrZWRcbmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluX190YWJsZVwiKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PSBcIm1haW5fX2NoZWNrYm94XCIpe1xuICAgICAgICBjb25zdCB0b2RvTGlzdE5vID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm1haW5fX3RhYmxlXCIpWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS10b2RvLWxpc3QnKTtcbiAgICAgICAgY29uc3QgdG9kb05vID0gZXZlbnQudGFyZ2V0LmF0dHJpYnV0ZXNbXCJkYXRhLXRvZG9cIl0udmFsdWU7XG5cbiAgICAgICAgdG9nZ2xlRmluaXNoZWQodG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObywgdG9kb05vKTtcbiAgICAgfVxuIH0pO1xuXG4vLyBleGVjdXRlIHdoZW4gdG9kbyBoYXMgYmVlbiBjbGlja2VkXG5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibWFpbl9fdGFibGVcIilbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudmFsdWUgPT0gXCJtYWluX190YWJsZV9fY29sdW1uLTFcIil7XG4gICAgICAgIGNvbnN0IHRvZG9MaXN0Tm8gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibWFpbl9fdGFibGVcIilbMF0uZ2V0QXR0cmlidXRlKCdkYXRhLXRvZG8tbGlzdCcpO1xuICAgICAgICBjb25zdCB0b2RvTm8gPSBldmVudC50YXJnZXQuYXR0cmlidXRlc1tcImRhdGEtdG9kb1wiXS52YWx1ZTtcbiAgICAgICAgb3BlbkRldGFpbHModG9kb0xpc3RBcnJheSwgdG9kb0xpc3RObywgdG9kb05vKTtcbiAgICB9O1xuIH0pO1xuXG4vLyBleGVjdXRlIHdoZW4gWCBoYXMgYmVlbiBjbGlja2VkIChkZXRhaWxzIHdpbmRvdylcbmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbF9fd2luZG93X19jbG9zZVwiKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBjbG9zZURldGFpbHMoKTtcbn0pO1xuXG4vLyBleGVjdXRlIHdoZW4gbW9kYWwgYmFja2dyb3VuZCBoYXMgYmVlbiBjbGlja2VkIChkZXRhaWxzIHdpbmRvdylcbmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21vZGFsJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgIGNsb3NlRGV0YWlscygpO1xufSk7XG5cbi8vIHRoaXMgaXMgbmVlZGVkLCBvdGhlcndpc2UgY2xpY2tpbmcgbW9kYWwgZXhlY3V0ZXMgYWxzbyB3aGVuIGNsaWNraW5nIGl0cyBjaGlsZCBlbGVtZW50cyAoZGV0YWlscyB3aW5kb3cpXG5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtb2RhbF9fd2luZG93JylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiBldmVudC5zdG9wUHJvcGFnYXRpb24oKSk7XG5cbi8vIGV4ZWN1dGUgd2hlbiBuZXcgdGFzayBoYXMgYmVlbiBjbGlja2VkXG5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibWFpbl9fbmV3LXRhc2tcIilbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgY29uc3QgdG9kb0xpc3RObyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtYWluX190YWJsZVwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9kby1saXN0Jyk7XG4gICAgICAgIG9wZW5BZGROZXcodG9kb0xpc3RObyk7XG4gfSk7XG5cbiAvLyBleGVjdXRlIHdoZW4gWCBoYXMgYmVlbiBjbGlja2VkIChhZGQgbmV3IHdpbmRvdylcbmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJtb2RhbC0tbmV3X193aW5kb3dfX2Nsb3NlXCIpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbihldmVudCkge1xuICAgIGNsb3NlQWRkTmV3KCk7XG59KTtcblxuLy8gZXhlY3V0ZSB3aGVuIG1vZGFsIGJhY2tncm91bmQgaGFzIGJlZW4gY2xpY2tlZCAoYWRkIG5ldyB3aW5kb3cpXG5kb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdtb2RhbC0tbmV3JylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgIGNsb3NlQWRkTmV3KCk7XG59KTtcblxuLy8gdGhpcyBpcyBuZWVkZWQsIG90aGVyd2lzZSBjbGlja2luZyBtb2RhbCBleGVjdXRlcyBhbHNvIHdoZW4gY2xpY2tpbmcgaXRzIGNoaWxkIGVsZW1lbnRzIChhZGQgbmV3IHdpbmRvdylcbmRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ21vZGFsLS1uZXdfX3dpbmRvdycpWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkpO1xuXG4vLyBleGVjdXRlIHdoZW4gY2hlY2tib3ggaGFzIGJlZW4gY2xpY2tlZFxuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcIm5hdl9fdG9kby1saXN0c1wiKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PSBcIm5hdl9fYWRkLW5ld1wiKSB7XG4gICAgICAgIHRvZG9MaXN0QXJyYXlbdG9kb0xpc3RBcnJheS5sZW5ndGhdID0gbmV3IFRvZG9MaXN0KHByb21wdChcIk5hbWUgZm9yIFRvZG8gbGlzdD9cIikpO1xuICAgICAgICBjb25zdCBsYXN0VG9kb0xpc3RObyA9ICh0b2RvTGlzdEFycmF5Lmxlbmd0aCAtIDEpXG4gICAgICAgIHJlZnJlc2hBbGwodG9kb0xpc3RBcnJheSwgbGFzdFRvZG9MaXN0Tm8pO1xuICAgICB9O1xuIH0pOyJdLCJuYW1lcyI6WyJyZWZyZXNoQWxsIiwidG9kb0xpc3RBcnJheSIsInRvZG9MaXN0Tm8iLCJwYXJlbnRFbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImlubmVySFRNTCIsImkiLCJsZW5ndGgiLCJjaGlsZEVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInRleHRDb250ZW50IiwibmFtZSIsInN0eWxlIiwiZm9udFdlaWdodCIsImFwcGVuZENoaWxkIiwiY3JlYXRlQnRuIiwicmVmcmVzaE5hdiIsInJlZnJlc2hNYWluIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwibW9kaWZ5RGVsZXRlQnRuIiwidGV4dCIsImNsYXNzTmFtZSIsInBhcmVudCIsImJ0biIsInJlbW92ZUVsZW1lbnRzIiwiYWRkTWFpblRpdGxlIiwidG9kb3MiLCJmaW5pc2hlZCIsInRhYmxlIiwibGkiLCJkaXYwIiwiY2hlY2tib3giLCJkaXYxIiwidGl0bGUiLCJkaXYyIiwiZHVlRGF0ZSIsImRpdjMiLCJwcmlvcml0eSIsInNvbWUiLCJlIiwiZ2V0RWxlbWVudEJ5SWQiLCJlbCIsImZvckVhY2giLCJjbG9zZURldGFpbHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY2xvc2VBZGROZXciLCJUb2RvTGlzdCIsImNvbnN0cnVjdG9yIiwidGhpcyIsInB1c2giLCJUb2RvIiwiZGVzY3JpcHRpb24iLCJub3RlcyIsIndpbmRvdyIsIm9ubG9hZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsIm5vZGVOYW1lIiwiZ2V0QXR0cmlidXRlIiwiY29uZmlybSIsInNwbGljZSIsInZhbHVlIiwidG9kb05vIiwiYXR0cmlidXRlcyIsInRvZ2dsZUZpbmlzaGVkIiwicmVmcmVzaERldGFpbHMiLCJvcGVuRGV0YWlscyIsInN0b3BQcm9wYWdhdGlvbiIsInByb21wdCIsImxhc3RUb2RvTGlzdE5vIl0sInNvdXJjZVJvb3QiOiIifQ==